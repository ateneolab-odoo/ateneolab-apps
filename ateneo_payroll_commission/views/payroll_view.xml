<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
		<record id="view_rules_input_tree" model="ir.ui.view">
			<field name="name">Payroll Salary Rule Input</field>
			<field name="model">hr.salary.rule.input</field>
			<field name="arch" type="xml">
				<tree string="Payroll Salary Rule input"  create="0">
					<field name="name"/>
					<field name="employee_id"/>
					<field name="category_id"/>
					<field name="amount"/>
					<field name="state"/>
				</tree>
			</field>
		</record>

		<record id="view_rules_comm_tree" model="ir.ui.view">
			<field name="name">Payroll Salary Rule Commission</field>
			<field name="model">hr.commission</field>
			<field name="arch" type="xml">
				<tree string="Payroll Salary Commission">
					<field name="name"/>
					<field name="date_generated"/>
					<field name="date_init"/>
					<field name="date_end"/>
					<field name="state"/>
				</tree>
			</field>
		</record>

		<record id="view_rules_inh" model="ir.ui.view">
			<field name="name">Payroll Salary Rule</field>
			<field name="model">hr.commission</field>
			<field name="arch" type="xml">
				<form string="Payroll Commission Salary Rule">
					<header>
						<button string="Generate" type="object" states="draft" name="generate_inputs_commission" class="btn btn-success"/>
						<button string="Cancel" type="object" states="draft,generated" name="set_cancelled" class="btn btn-default"/>
						<field name="state" widget="statusbar" statusbar_visible="draft,generated,processed,cancelled"/>
					</header>
					<sheet string="Commissions">
						<h1>
							<field name="name" required="1"/>
						</h1>
						<group colspan="4">
							<group col="2">
								<label for="date_init" string="Period"/>
								<div>
									<field name="date_init" class="oe_inline" required="1"/> - <field name="date_end" class="oe_inline" required="1"/>
								</div>
							</group>
							<group col="2">
									<field name="date_generated"/>
							</group>
						</group>
						<notebook>
							<page name="rules" string="Rules">
								<field name="salary_ids" options="{'no_create':True}">
									<tree>
										<field name="name"/>
										<field name="employee_id"/>
										<field name="category_id"/>
										<field name="amount"/>
										<field name="amount_untaxed"/>
										<field name="total"/>
										<field name="state"/>
									</tree>
								</field>
							</page>
						</notebook>
					</sheet>
				</form>
			</field>
		</record>

		<record id="view_rules_input_inh" model="ir.ui.view">
			<field name="name">Payroll Salary Rule Input</field>
			<field name="model">hr.salary.rule.input</field>
			<field name="arch" type="xml">
				<form string="Payroll Salary Rule Input"  create="0">
					<header>
						<field name="state" widget="statusbar" statusbar_visible="draft,processed,cancelled"/>
					</header>
					<sheet string="Salary Rule Input">
						<h1>
							<field name="name" required="1"/>
						</h1>
						<group colspan="4">
							<group col="2">
									<field name="employee_id" required="1"/>
									<field name="category_id" required="1"/>
							</group>
							<group col="2">
									<field name="amount" required="1"/>
									<field name="amount_untaxed" required="1"/>
									<field name="total" required="1"/>
							</group>
						</group>
					</sheet>
				</form>
			</field>
		</record>

		<record id="view_rules_input_search" model="ir.ui.view">
			<field name="name">Payroll Salary Rule Input</field>
			<field name="model">hr.salary.rule.input</field>
			<field name="arch" type="xml">
				<search string="Payroll Salary Rule Input">
					<field name="name"/>
					<field name="employee_id"/>
					<filter string="Pending" name="pending" domain="[('state','not in',['processed','cancelled'])]" help="Commissions to be processed by payroll engine."/>

				</search>
			</field>
		</record>

		<record id="action_salary_rules_input" model="ir.actions.act_window">
			<field name="name">Payroll Salary Rules Inputs</field>
			<field name="res_model">hr.salary.rule.input</field>
			<field name="view_type">form</field>
			<field name="context">{'search_default_pending':1}</field>
			<field name="view_mode">tree,form</field>
		</record>

		<record id="action_salary_rule" model="ir.actions.act_window">
			<field name="name">Payroll Commissions</field>
			<field name="res_model">hr.commission</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>

		<menuitem id="menu_salary_rules" name="Custom Payroll Salary Rules"
				  parent="hr_payroll.menu_hr_payroll_configuration" groups="hr.group_hr_manager"/>
		<menuitem id="menu_salary_rule" name="Payroll Commissions" action="action_salary_rule"
				  parent="menu_salary_rules" groups="hr.group_hr_manager"/>
		<menuitem id="menu_salary_rules_input" name="Payroll Commission Inputs" action="action_salary_rules_input"
				  parent="menu_salary_rules" groups="hr.group_hr_manager"/>
	</data>
</odoo>